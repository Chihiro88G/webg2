<%- include partials/header.ejs %>

    <%- include partials/main_nav.ejs %>


        <!-- Main Content -->
        <main class="container">
            <div class="row">
                <div class="offset-md-1 col-md-11">
                    <h1>
                        <%= title %>
                    </h1>

                    <!-- For add button -->
                    <!--  <% if(typeof displayName=='string' && displayName) { %> -->
                        <a href="/incidents/add" class="btn btn-primary" role="button">
                            <i class="fas fa-plus-circle"></i> Add an Incident</a>
                        <!-- <% } %> -->
                        
                        <a href="/incidents/add" class="btn btn-primary" role="button">
                            <i class="fas fa-plus-circle"></i> Add an Incident</a>

                    <br>
                    <table class="table table-bordered table-striped table-hover">
                        <!-- Header Row-->
                        <tr class="d-flex">
                            <% if(typeof displayName=='string' && displayName) { %>
                                <th class="text-center col-2">Incident name</th>
                                <th class="text-center col-2">Author</th>
                                <th class="text-center col-1">Date</th>
                                <th class="col-4">Details</th>
                                <th class="text-center col-1">Price</th>
                                <th class="text-center col-1"></th>
                                <th class="text-center col-1"></th>
                                <% } else { %>
                                    <th class="text-center col-2">Incident name</th>
                                    <th class="text-center col-2">Author</th>
                                    <th class="text-center col-1">Date</th>
                                    <th class="col-6">Details</th>
                                    <th class="text-center col-1">Price</th>

                                    <!--to be deleted when we integrate authentication-->
                                    <th class="text-center col-1"></th>
                                    <th class="text-center col-1"></th>
                                    <% } %>
                        </tr>

                        <!-- Repeatable Template Row -->

                        <% for(let count=0; count < IncidentList.length; count++) { %>
                            <tr class="d-flex">
                                <% if(typeof displayName=='string' && displayName) { %>
                                    <td class="text-center col-2">
                                        <%= IncidentList[count].name %>
                                    </td>
                                    <td class="text-center col-2">
                                        <%= IncidentList[count].author %>
                                    </td>
                                    <td class="text-center col-1">
                                        <%= IncidentList[count].published %>
                                    </td>
                                    <td class="col-4">
                                        <%= IncidentList[count].description %>
                                    </td>
                                    <td class="text-center col-1">
                                        <%= IncidentList[count].price %>
                                    </td>

                                    <!-- For update button -->
                                    <td class="text-center col-1">
                                        <a href="/incidents/edit/<%= IncidentList[count]._id %>"
                                            class="btn btn-primary btn-sm">
                                            <i class="fas fa-pencil-alt"></i> Edit</a>
                                    </td>
                                    
                                    <td class="text-center col-1">
                                        <a href="/incidents/delete/<%= IncidentList[count]._id %>"
                                            class="btn btn-danger btn-sm">
                                            <i class="fas fa-trash-alt"></i> Delete</a>
                                    </td>

                                    <% } else { %>
                                        <td class="text-center col-2">
                                            <%= IncidentList[count].name %>
                                        </td>
                                        <td class="text-center col-2">
                                            <%= IncidentList[count].author %>
                                        </td>
                                        <td class="text-center col-1">
                                            <%= IncidentList[count].published %>
                                        </td>
                                        <td class="col-6">
                                            <%= IncidentList[count].description %>
                                        </td>
                                        <td class="text-center col-1">
                                            <%= IncidentList[count].price %>
                                        </td>

                                        <!--Delete this when we integrate Authentication-->
                                        <td class="text-center col-1">
                                        <a href="/incidents/edit/<%= IncidentList[count]._id %>"
                                            class="btn btn-primary btn-sm">
                                            <i class="fas fa-pencil-alt"></i> Edit</a>
                                        </td>
                                    
                                        <td class="text-center col-1">
                                            <a href="/incidents/delete/<%= IncidentList[count]._id %>"
                                                class="btn btn-danger btn-sm">
                                                <i class="fas fa-trash-alt"></i> Delete</a>
                                        </td>
                                        <% } %>
                            </tr>
                            <% } %>
                    </table>
                </div>
            </div>
        </main>

        <%- include partials/bottom_nav.ejs %>

            <%- include partials/footer.ejs %>